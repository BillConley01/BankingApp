{"ast":null,"code":"import _slicedToArray from\"/Users/williamconley/Documents/GitHub/BankingApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import Card from\"../components/card.js\";import{useNavigate}from\"react-router-dom\";import jwt from\"jsonwebtoken\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){//shows input fields and hides them after from submitted\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];//sets error messsage\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];return/*#__PURE__*/_jsx(Card,{hdrcolor:\"greenyellow\",hdrtext:\"#282c34\",bodycolor:\"dodgerblue\",bodytext:\"#282c34\",header:\"Login\",status:status,body:show?/*#__PURE__*/_jsx(LoginForm,{setShow:setShow,setStatus:setStatus}):/*#__PURE__*/_jsx(LoginSuccess,{setShow:setShow,setStatus:setStatus})});};function LoginSuccess(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Success\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-light\",onClick:function onClick(){return props.setShow(true);},children:\"Logout\"})]});}var LoginForm=function LoginForm(props){//sets user properties\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];//for enabling submit button\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),validTransaction=_useState10[0],setValidTransaction=_useState10[1];//for redirect after login\nvar navigate=useNavigate();var handleLogin=function handleLogin(){if(!validate(email,\"email\"))return;if(!validate(password,\"password\"))return;if(password.length<8){alert(\"Password Requires a minimum of 8 Characters!\");return;}fetch(\"/account/login/\".concat(email,\"/\").concat(password)).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);localStorage.setItem(\"token\",data.user);var token=localStorage.getItem(\"token\");var user=jwt.decode(token);localStorage.setItem(\"token1\",user.name);localStorage.setItem(\"token2\",user.balance);props.setStatus(\"\");props.setShow(false);alert(\"Login Successful, Welcome back \".concat(user.name,\"!\"));props.setShow(false);clearForm();navigate(\"/\");}catch(err){props.setStatus(text);console.log(\"err:\",text);}});};var enableSubmit=function enableSubmit(){if(email===\"\"||password===\"\"){setValidTransaction(false);}else setValidTransaction(true);};var validate=function validate(field,label){if(!field){props.setStatus(\"Error: \"+label);setTimeout(function(){return props.setStatus(\"\");},3000);return false;}return true;};var clearForm=function clearForm(){setEmail(\"\");setPassword(\"\");setValidTransaction(false);};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",className:\"form-control\",id:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){setEmail(e.currentTarget.value);enableSubmit();}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){setPassword(e.currentTarget.value);enableSubmit();}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control btn btn-light mb-1 mt-0\",disabled:!validTransaction,onClick:handleLogin,children:\"Submit\"})]});};export default Login;","map":{"version":3,"names":["useState","Card","useNavigate","jwt","Login","show","setShow","status","setStatus","LoginSuccess","props","LoginForm","email","setEmail","password","setPassword","validTransaction","setValidTransaction","navigate","handleLogin","validate","length","alert","fetch","then","response","text","data","JSON","parse","localStorage","setItem","user","token","getItem","decode","name","balance","clearForm","err","console","log","enableSubmit","field","label","setTimeout","e","currentTarget","value"],"sources":["/Users/williamconley/Documents/GitHub/BankingApp/client/src/pages/login.js"],"sourcesContent":["import { useState } from \"react\";\nimport Card from \"../components/card.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\n\nconst Login = () => {\n  //shows input fields and hides them after from submitted\n  const [show, setShow] = useState(true);\n  //sets error messsage\n  const [status, setStatus] = useState(\"\");\n\n  return (\n    <Card\n      hdrcolor=\"greenyellow\"\n      hdrtext=\"#282c34\"\n      bodycolor=\"dodgerblue\"\n      bodytext=\"#282c34\"\n      header=\"Login\"\n      status={status}\n      body={\n        show ? (\n          <LoginForm setShow={setShow} setStatus={setStatus} />\n        ) : (\n          <LoginSuccess setShow={setShow} setStatus={setStatus} />\n        )\n      }\n    />\n  );\n};\nfunction LoginSuccess(props) {\n  return (\n    <>\n      <h5>Success</h5>\n      <button\n        type=\"submit\"\n        className=\"btn btn-light\"\n        onClick={() => props.setShow(true)}\n      >\n        Logout\n      </button>\n    </>\n  );\n}\nconst LoginForm = (props) => {\n  //sets user properties\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  //for enabling submit button\n  const [validTransaction, setValidTransaction] = useState(false);\n  //for redirect after login\n  const navigate = useNavigate();\n  \n  const handleLogin = () => {\n    if (!validate(email, \"email\")) return;\n    if (!validate(password, \"password\")) return;\n    if (password.length < 8) {\n      alert(\"Password Requires a minimum of 8 Characters!\");\n      return;\n    }\n    fetch(`/account/login/${email}/${password}`)\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          const data = JSON.parse(text)\n          localStorage.setItem(\"token\", data.user);\n          const token = localStorage.getItem(\"token\");\n          const user = jwt.decode(token);\n          localStorage.setItem(\"token1\", user.name);\n          localStorage.setItem(\"token2\", user.balance);\n          props.setStatus(\"\");\n          props.setShow(false);\n          alert(`Login Successful, Welcome back ${user.name}!`);\n          props.setShow(false);\n          clearForm();\n          navigate(\"/\");\n        } catch (err) {\n          props.setStatus(text);\n          console.log(\"err:\", text);\n        }\n      });\n  };\n\n  const enableSubmit = () => {\n    if (email === \"\" || password === \"\") {\n      setValidTransaction(false);\n    } else setValidTransaction(true);\n  };\n\n  const validate = (field, label) => {\n    if (!field) {\n      props.setStatus(\"Error: \" + label);\n      setTimeout(() => props.setStatus(\"\"), 3000);\n      return false;\n    }\n    return true;\n  };\n\n  const clearForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n    setValidTransaction(false);\n  };\n\n  return (\n    <form>\n      <label>Email address</label>\n      <input\n        type=\"input\"\n        className=\"form-control\"\n        id=\"email\"\n        placeholder=\"Enter email\"\n        value={email}\n        onChange={(e) => {\n          setEmail(e.currentTarget.value);\n          enableSubmit();\n        }}\n      />\n      <label>Password</label>\n      <input\n        type=\"password\"\n        className=\"form-control\"\n        id=\"password\"\n        placeholder=\"Enter password\"\n        autoComplete=\"current-password\"\n        value={password}\n        onChange={(e) => {\n          setPassword(e.currentTarget.value);\n          enableSubmit();\n        }}\n      />\n      <br />\n      <button\n        type=\"submit\"\n        className=\"form-control btn btn-light mb-1 mt-0\"\n        disabled={!validTransaction}\n        onClick={handleLogin}\n      >\n        Submit\n      </button>\n    </form>\n  );\n};\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}