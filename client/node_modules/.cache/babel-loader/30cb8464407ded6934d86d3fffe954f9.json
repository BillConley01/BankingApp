{"ast":null,"code":"var _jsxFileName = \"/Users/williamconley/Documents/GitHub/BankingApp/client/src/pages/login.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport Card from \"../components/card.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  //shows input fields and hides them after from submitted\n  const [show, setShow] = useState(true); //sets error messsage\n\n  const [status, setStatus] = useState(\"\");\n  return /*#__PURE__*/_jsxDEV(Card, {\n    hdrcolor: \"greenyellow\",\n    hdrtext: \"#282c34\",\n    bodycolor: \"dodgerblue\",\n    bodytext: \"#282c34\",\n    header: \"Login\",\n    status: status,\n    body: show ? /*#__PURE__*/_jsxDEV(LoginForm, {\n      setShow: setShow,\n      setStatus: setStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(LoginSuccess, {\n      setShow: setShow,\n      setStatus: setStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"ZCOAvRPoPVYyJnOdpsqDnTyp+E4=\");\n\n_c = Login;\n\nfunction LoginSuccess(props) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Success\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-light\",\n      onClick: () => props.setShow(true),\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_c2 = LoginSuccess;\n\nconst LoginForm = props => {\n  _s2();\n\n  //sets user properties\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\"); //for enabling submit button\n\n  const [validTransaction, setValidTransaction] = useState(false); //for redirect after login\n\n  const navigate = useNavigate();\n\n  const handleLogin = () => {\n    if (!validate(email, \"email\")) return;\n    if (!validate(password, \"password\")) return;\n\n    if (password.length < 8) {\n      alert(\"Password Requires a minimum of 8 Characters!\");\n      return;\n    }\n\n    fetch(`/account/login/${email}/${password}`).then(response => response.text()).then(text => {\n      try {\n        const data = JSON.parse(text);\n        localStorage.setItem(\"token\", data.user);\n        const token = localStorage.getItem(\"token\");\n        const user = jwt.decode(token);\n        localStorage.setItem(\"token2\", user.balance);\n        localStorage.setItem(\"token2\", user.balance);\n        localStorage.setItem(\"token3\", user.name);\n        /*\n        localStorage.setItem(\"token1\", data.email);\n        localStorage.setItem(\"token2\", data.balance);\n        localStorage.setItem(\"token3\", data.name);\n        const token1 = localStorage.getItem(\"token1\");\n        const token2 = localStorage.getItem(\"token2\");\n        const token3 = localStorage.getItem(\"token3\");\n        console.log(\"email: \", token1);\n        console.log(\"balance: \", token2);\n        console.log(\"name: \", token3);\n        */\n\n        props.setStatus(\"\");\n        props.setShow(false);\n        console.log(\"JSON:\", user);\n        console.log(\"User:\", user.name);\n        alert(`Login Successful, Welcome back ${user.name}!`);\n        props.setShow(false);\n        clearForm();\n        navigate(\"/\");\n      } catch (err) {\n        props.setStatus(text);\n        console.log(\"err:\", text);\n      }\n    });\n  };\n\n  const enableSubmit = () => {\n    if (email === \"\" || password === \"\") {\n      setValidTransaction(false);\n    } else setValidTransaction(true);\n  };\n\n  const validate = (field, label) => {\n    if (!field) {\n      props.setStatus(\"Error: \" + label);\n      setTimeout(() => props.setStatus(\"\"), 3000);\n      return false;\n    }\n\n    return true;\n  };\n\n  const clearForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n    setValidTransaction(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Email address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"input\",\n      className: \"form-control\",\n      id: \"email\",\n      placeholder: \"Enter email\",\n      value: email,\n      onChange: e => {\n        setEmail(e.currentTarget.value);\n        enableSubmit();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      placeholder: \"Enter password\",\n      autoComplete: \"current-password\",\n      value: password,\n      onChange: e => {\n        setPassword(e.currentTarget.value);\n        enableSubmit();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"form-control btn btn-light mb-1 mt-0\",\n      disabled: !validTransaction,\n      onClick: handleLogin,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(LoginForm, \"J41h8iasS+73AJcSrbvpQvdh/Jw=\", false, function () {\n  return [useNavigate];\n});\n\n_c3 = LoginForm;\nexport default Login;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"LoginSuccess\");\n$RefreshReg$(_c3, \"LoginForm\");","map":{"version":3,"names":["useState","Card","useNavigate","jwt","Login","show","setShow","status","setStatus","LoginSuccess","props","LoginForm","email","setEmail","password","setPassword","validTransaction","setValidTransaction","navigate","handleLogin","validate","length","alert","fetch","then","response","text","data","JSON","parse","localStorage","setItem","user","token","getItem","decode","balance","name","console","log","clearForm","err","enableSubmit","field","label","setTimeout","e","currentTarget","value"],"sources":["/Users/williamconley/Documents/GitHub/BankingApp/client/src/pages/login.js"],"sourcesContent":["import { useState } from \"react\";\nimport Card from \"../components/card.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\n\nconst Login = () => {\n  //shows input fields and hides them after from submitted\n  const [show, setShow] = useState(true);\n  //sets error messsage\n  const [status, setStatus] = useState(\"\");\n\n  return (\n    <Card\n      hdrcolor=\"greenyellow\"\n      hdrtext=\"#282c34\"\n      bodycolor=\"dodgerblue\"\n      bodytext=\"#282c34\"\n      header=\"Login\"\n      status={status}\n      body={\n        show ? (\n          <LoginForm setShow={setShow} setStatus={setStatus} />\n        ) : (\n          <LoginSuccess setShow={setShow} setStatus={setStatus} />\n        )\n      }\n    />\n  );\n};\nfunction LoginSuccess(props) {\n  return (\n    <>\n      <h5>Success</h5>\n      <button\n        type=\"submit\"\n        className=\"btn btn-light\"\n        onClick={() => props.setShow(true)}\n      >\n        Logout\n      </button>\n    </>\n  );\n}\nconst LoginForm = (props) => {\n  //sets user properties\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  //for enabling submit button\n  const [validTransaction, setValidTransaction] = useState(false);\n  //for redirect after login\n  const navigate = useNavigate();\n  const handleLogin = () => {\n    if (!validate(email, \"email\")) return;\n    if (!validate(password, \"password\")) return;\n    if (password.length < 8) {\n      alert(\"Password Requires a minimum of 8 Characters!\");\n      return;\n    }\n    fetch(`/account/login/${email}/${password}`)\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          const data = JSON.parse(text);\n\n          localStorage.setItem(\"token\", data.user);\n          const token = localStorage.getItem(\"token\");\n          const user = jwt.decode(token);\n          localStorage.setItem(\"token2\", user.balance);\n          localStorage.setItem(\"token2\", user.balance);\n          localStorage.setItem(\"token3\", user.name);\n          /*\n          localStorage.setItem(\"token1\", data.email);\n          localStorage.setItem(\"token2\", data.balance);\n          localStorage.setItem(\"token3\", data.name);\n          const token1 = localStorage.getItem(\"token1\");\n          const token2 = localStorage.getItem(\"token2\");\n          const token3 = localStorage.getItem(\"token3\");\n          console.log(\"email: \", token1);\n          console.log(\"balance: \", token2);\n          console.log(\"name: \", token3);\n          */\n          props.setStatus(\"\");\n          props.setShow(false);\n          console.log(\"JSON:\", user);\n          console.log(\"User:\", user.name);\n          alert(`Login Successful, Welcome back ${user.name}!`);\n          props.setShow(false);\n          clearForm();\n          navigate(\"/\");\n        } catch (err) {\n          props.setStatus(text);\n          console.log(\"err:\", text);\n        }\n      });\n  };\n\n  const enableSubmit = () => {\n    if (email === \"\" || password === \"\") {\n      setValidTransaction(false);\n    } else setValidTransaction(true);\n  };\n\n  const validate = (field, label) => {\n    if (!field) {\n      props.setStatus(\"Error: \" + label);\n      setTimeout(() => props.setStatus(\"\"), 3000);\n      return false;\n    }\n    return true;\n  };\n\n  const clearForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n    setValidTransaction(false);\n  };\n\n  return (\n    <form>\n      <label>Email address</label>\n      <input\n        type=\"input\"\n        className=\"form-control\"\n        id=\"email\"\n        placeholder=\"Enter email\"\n        value={email}\n        onChange={(e) => {\n          setEmail(e.currentTarget.value);\n          enableSubmit();\n        }}\n      />\n      <label>Password</label>\n      <input\n        type=\"password\"\n        className=\"form-control\"\n        id=\"password\"\n        placeholder=\"Enter password\"\n        autoComplete=\"current-password\"\n        value={password}\n        onChange={(e) => {\n          setPassword(e.currentTarget.value);\n          enableSubmit();\n        }}\n      />\n      <br />\n      <button\n        type=\"submit\"\n        className=\"form-control btn btn-light mb-1 mt-0\"\n        disabled={!validTransaction}\n        onClick={handleLogin}\n      >\n        Submit\n      </button>\n    </form>\n  );\n};\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}