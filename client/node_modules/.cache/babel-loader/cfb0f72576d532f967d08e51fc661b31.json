{"ast":null,"code":"import _slicedToArray from\"/Users/williamconley/Documents/GitHub/BankingApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ATM from\"../components/ATM\";import Card from\"../components/card.js\";import Welcome from\"../components/welcome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Withdraw=function Withdraw(){//state for amount and email\nvar _useState=useState(0.0),_useState2=_slicedToArray(_useState,2),amount=_useState2[0],setAmount=_useState2[1];//sets account balance\nvar _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];//sets atm component status to withdraw\nvar _useState5=useState(\"Cash Back\"),_useState6=_slicedToArray(_useState5,1),atmMode=_useState6[0];//state to enable and disable submit button\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),validTransaction=_useState8[0],setValidTransaction=_useState8[1];// Clears input field after form is submitted or ATM mode Changed\nvar _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),value=_useState10[0],setValue=_useState10[1];//displays balance amount\nvar status=\"Balance: $\".concat(Number(total).toFixed(2),\" \");var handleChange=function handleChange(event){setValue(event.target.value);setAmount(Number(event.target.value));if(event.target.value<=0){alert(\"Enter a Positive Value!\");setValidTransaction(false);}else if(Number(event.target.value)>total){alert(\"Insufficient Balance!\");setValidTransaction(false);}else setValidTransaction(true);};useEffect(function(){var balance=localStorage.getItem(\"token2\");if(balance){setTotal(balance);console.log(balance);}else{localStorage.removeItem(\"token2\");}},[]);//handles submit events\nvar handleSubmit=function handleSubmit(event){if(Number(amount)<=total&&Number(amount)>=0){fetch(\"/account/update/-\".concat(amount),{headers:{\"x-access-token\":localStorage.getItem(\"token\")}}).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);var balance=data.value.balance-amount;setTotal(balance);localStorage.setItem(\"token2\",balance);}catch(err){console.log(\"err:\",text);}});alert(\"$\".concat(amount.toFixed(2),\" Succesfully Withdrawn!\"));setValidTransaction(false);}else{setValidTransaction(false);//insufficient balance message\nalert(\"Insufficient Balance!\");}// Clears input field after form is submitted\nsetValue(\"\");event.preventDefault();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Welcome,{}),/*#__PURE__*/_jsx(Card,{className:\"withdrawal-page p-3\",hdrcolor:\"greenyellow\",hdrtext:\"#282c34\",bodycolor:\"dodgerblue\",bodytext:\"#282c34\",header:\"Withdrawals\",title:status,text:\"Enter Withdrawal Amount\",body:/*#__PURE__*/_jsx(\"form\",{className:\"text-center\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(ATM,{onChange:handleChange,atmMode:atmMode,validTransaction:validTransaction,value:value})})})]});};export default Withdraw;","map":{"version":3,"names":["React","useEffect","useState","ATM","Card","Welcome","Withdraw","amount","setAmount","total","setTotal","atmMode","validTransaction","setValidTransaction","value","setValue","status","Number","toFixed","handleChange","event","target","alert","balance","localStorage","getItem","console","log","removeItem","handleSubmit","fetch","headers","then","response","text","data","JSON","parse","setItem","err","preventDefault"],"sources":["/Users/williamconley/Documents/GitHub/BankingApp/client/src/pages/withdraw.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ATM from \"../components/ATM\";\nimport Card from \"../components/card.js\";\nimport Welcome from \"../components/welcome\";\n\nconst Withdraw = () => {\n  //state for amount and email\n  const [amount, setAmount] = useState(0.0);\n  //sets account balance\n  const [total, setTotal] = useState(0);\n  //sets atm component status to withdraw\n  const [atmMode] = useState(\"Cash Back\");\n  //state to enable and disable submit button\n  const [validTransaction, setValidTransaction] = useState(false);\n  // Clears input field after form is submitted or ATM mode Changed\n  const [value, setValue] = useState(\"\");\n  //displays balance amount\n  let status = `Balance: $${Number(total).toFixed(2)} `;\n\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    setAmount(Number(event.target.value));\n    if (event.target.value <= 0) {\n      alert(\"Enter a Positive Value!\");\n      setValidTransaction(false);\n    } else if (Number(event.target.value) > total) {\n      alert(\"Insufficient Balance!\");\n      setValidTransaction(false);\n    } else setValidTransaction(true);\n  };\n\n  useEffect(() => {\n    const balance = localStorage.getItem(\"token2\");\n    if (balance) {\n      setTotal(balance);\n      console.log(balance);\n    } else {\n      localStorage.removeItem(\"token2\");\n    }\n  }, []);\n\n  //handles submit events\n  const handleSubmit = (event) => {\n    if (Number(amount) <= total && Number(amount) >= 0) {\n      fetch(`/account/update/-${amount}`, {\n        headers: {\n          \"x-access-token\": localStorage.getItem(\"token\"),\n        },\n      })\n        .then((response) => response.text())\n        .then((text) => {\n          try {\n            const data = JSON.parse(text);\n            const balance = data.value.balance - amount;\n            setTotal(balance);\n            localStorage.setItem(\"token2\", balance);\n          } catch (err) {\n            console.log(\"err:\", text);\n          }\n        });\n      alert(`$${amount.toFixed(2)} Succesfully Withdrawn!`);\n      setValidTransaction(false);\n    } else {\n      setValidTransaction(false);\n      //insufficient balance message\n      alert(\"Insufficient Balance!\");\n    }\n    // Clears input field after form is submitted\n    setValue(\"\");\n    event.preventDefault();\n  };\n\n  return (\n    <>\n      <Welcome />\n      <Card\n        className=\"withdrawal-page p-3\"\n        hdrcolor=\"greenyellow\"\n        hdrtext=\"#282c34\"\n        bodycolor=\"dodgerblue\"\n        bodytext=\"#282c34\"\n        header=\"Withdrawals\"\n        title={status}\n        text=\"Enter Withdrawal Amount\"\n        body={\n          <form className=\"text-center\" onSubmit={handleSubmit}>\n            <ATM\n              onChange={handleChange}\n              atmMode={atmMode}\n              validTransaction={validTransaction}\n              value={value}\n            />\n          </form>\n        }\n      ></Card>\n    </>\n  );\n};\nexport default Withdraw;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}